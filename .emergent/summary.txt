<analysis>**original_problem_statement:**
The user's primary goal is to build a comprehensive, mobile-first HR operating system named DAR AL CODE HR OS. After a successful bug-fixing phase, the project's direction has shifted to a complete overhaul of the **Contract Management System**, deprecating the old system in favor of a new Contracts V2 workflow.

However, before starting this new development, the user has issued a mandatory, high-priority request for a **comprehensive, text-only, code-based audit** of the entire existing application. This audit must be completed and approved by the user before any work on Contracts V2 can begin.

The user has also imposed two strict, non-negotiable rules for the application:
1.  **Full Language Standardization:** The app must support only two modes: 100% Arabic (default) or 100% English, with no mixed-language UI.
2.  **Strict Date/Time Formatting:** All dates and times in the UI must be in a human-readable  format.

**User's preferred language**: Arabic. The next agent **MUST** respond and interact in Arabic.

**what currently exists?**
The application is in a stable, functional state following a major bug-fixing phase where issues with map visibility, UI translation, date formats, workflows, and leave logic were resolved and verified.

The current agent's session has been dedicated to fulfilling the user's new request for a system-wide audit. To this end, the agent has performed an extensive review of the codebase, reading dozens of frontend () and backend () files to build a deep understanding of the system's architecture, workflows, and data models. The application is running, and the agent has confirmed its state via preliminary file checks.

**Last working item**:
-   **Last item agent was working:** Performing a comprehensive, code-based system audit as per the user's explicit and detailed instructions in the latest message. The user requires a textual report analysing routes, data connections, STAS Mirror logic, language/date implementation, and a final GAP analysis, strictly forbidding screenshots. The agent was gathering information by reading files.
-   **Status:** IN PROGRESS
-   **Agent Testing Done:** N/A (Task is analysis, not implementation)
-   **Which testing method agent to use?** N/A
-   **User Testing Done:** N/A

**All Pending/In progress Issue list**:
-   **Issue 1: Complete the Comprehensive System Audit (P0 - Highest Priority)**
    -   **Description:** The user has blocked all development pending a detailed, text-only, code-based report on the current system. The agent must deliver this report, addressing every point from the user's last message, before proceeding.
    -   **Attempted fixes:** The agent has read most of the relevant project files. The initial approach was based on a more general checklist, but the user clarified they need a purely programmatic analysis. The gathered information is still valid, but it needs to be synthesized into the specific textual format the user demanded.
    -   **Next debug checklist:**
        1.  Synthesize all the information gathered from reading frontend and backend files.
        2.  Structure the findings into a clear, textual report that directly answers each of the user's questions from their last message (Routes Map, Wiring/Trace Links, STAS Mirror Coverage, Language/Date Gaps, Feature Logic, Final GAP list).
        3.  Use  to find all API endpoints in  and trace their usage in the  directory to create the Routes Map.
        4.  Analyze  and  to document the transaction workflows, data dependencies (), and the logic for  in the STAS mirror.
        5.  Use  to find any remaining hardcoded English text in the frontend and identify the central date-formatting utilities.
        6.  Present this complete textual report to the user in Arabic for approval.
    -   **Why fix this issue and what will be achieved with the fix?** This is a mandatory prerequisite from the user. Completing it will provide a shared, accurate understanding of the current system, unblock the Contracts V2 development, and prevent future rework.
    -   **Status:** IN PROGRESS
    -   **Is recurring issue?** N
    -   **Should Test frontend/backend/both after fix?** N/A
    -   **Blocked on other issue:** None. This task is the primary blocker.

**In progress Task List**:
-   **Task 1: Comprehensive System Audit**
    -   **Where to resume:** The agent has completed the file-reading phase. The next step is to process and structure this information into the specific textual report format requested by the user. The agent must now generate the final report for the user's review.
    -   **What will be achieved with this?** A detailed, code-based audit report that meets the user's requirements and unblocks further development.
    -   **Status:** IN PROGRESS
    -   **Should Test frontend/backend/both after fix?** N/A
    -   **Blocked on something:** No.

**Upcoming and Future Tasks**
-   **Upcoming Tasks:**
    -   **P0: Implement New Contract Management System (V2) & Enforce Strict Standardization Rules (BLOCKED by System Audit)**
        -   **Phase 1: Planning & Cleanup:** Delete old contract system UI/API, archive  collection.
        -   **Phase 2: New Contract & User Lifecycle:** Build New Contract flow with STAS approval and automated user provisioning.
        -   **Phase 3: Employee Migration & Data Snapshot:** Build Migrate Employee flow with opening data snapshot.
        -   **Phase 4: System-Wide Standardization:** Implement global language toggle (Ar/En) and enforce  date format.
        -   **Phase 5: STAS Enhancements:** Build User Management view for STAS.
-   **Future Tasks:**
    -   **P1:** Settlement Module
    -   **P2:** CEO Dashboard & Employee Profile Card
    -   **P3:** Warnings & Loans Modules

**Completed work in this session**
-   None. The current session has been dedicated to investigation and analysis for the audit task.

**Earlier issues found/mentioned but not fixed**
-   **Issue 1: Missing translation key**
    -   **Debug checklist:** The agent observed the text  in the UI. Investigation confirmed the key is missing from .
    -   **Why to solve this issue and what will be achieved with this?** Fixing this will ensure the UI is 100% translated as per the user's strict rules.
    -   **Should Test frontend/backend/both after fix:** Frontend
    -   **Is recurring issue?** N

**Known issue recurrence from previous fork**
-   None.

**Code Architecture**


**Key Technical Concepts**
-   **i18n (Internationalization):** Full language toggling (Arabic/English).
-   **User/Contract Lifecycle Management:** A contract-driven process for user creation and system integration.
-   **Data Governance & Auditing:** The STAS mirror serves as a central hub for auditing system linkages and user activity.
-   **Data Migration:** A dedicated flow for onboarding existing employees with a data snapshot.

**key DB schema**
-   ****: Legacy/Archival. Do not delete the collection, but do not use.
-   ****: New source of truth for all contracts.
-   ****: Linked to .
-   ****: New collection needed for STAS user session monitoring.

**All files of reference**
-   **User Instructions:** User messages **#72 (latest and most critical)** and #4. The handoff summary detailing the V2 requirements (derived from messages 138, 141, 162) is also relevant for post-audit planning.
-   **Key files for audit:** The entire  and  directories.

**Areas that need refactoring**:
-   **Contract Management:** Complete removal of the old system's UI and routes.
-   **Internationalization (i18n):** All hardcoded text must be moved to translation files.
-   **Date/Time Handling:** Centralize and enforce a single utility for all date formatting to the  timezone.

**key api endpoints**
-   : **TO BE DELETED.**
-   : To create a new contract and employee.
-   : To migrate an existing employee to a V2 contract.
-   : To fetch data for the STAS user management view.

**Critical Info for New Agent**
-   Your **only** immediate task is to complete the comprehensive, code-based audit and present it to the user as a **textual report in Arabic**.
-   **DO NOT** start coding Contracts V2. **DO NOT** use screenshots or perform UI-based checks. The user has been very explicit about this.
-   The user's last message (#72) is the single source of truth for the audit requirements. Address every point meticulously.
-   This audit is a **hard blocker** for all other development tasks. You must get the user's approval on the audit report before doing anything else.

**documents and test reports created in this job**
-   None in this session.

**Last 10 User Messages and any pending HUMAN messages**
-   **User (Message #72 - LATEST & PENDING):** Provided very specific, mandatory instructions for a programmatic and textual-only inspection of the system. Forbade the use of screenshots. Outlined the exact structure and content of the required audit report, covering routes, data wiring, STAS logic, language/date handling, and a GAP analysis. Stated clearly not to begin any new implementation before this textual inspection is delivered.
-   **User (Message #4):** Initially requested a comprehensive system check via a Checklist format. This request is now superseded and refined by message #72.

**Project Health Check:**
-   **Stable:** The application is in a working state.
-   **Outdated:** The implementation is misaligned with the user's new vision for contract management and UI standards. The requested audit will document the precise state before the major overhaul begins.

**3rd Party Integrations**
-   
-   

**Testing status**
-   **Testing agent used after significant changes:** NO (current task is analysis).
-   **Troubleshoot agent used after agent stuck in loop:** NO
-   **Test files created:** []
-   **Known regressions:** None.

**Credentials to test flow:**
-   Use the user-switcher dropdown in the app's header. Roles include , , , and  (CEO). No passwords are required.

**What agent forgot to execute**
-   The agent has not forgotten to execute anything. It was actively working to fulfill the user's request when a new, more specific set of instructions was provided. The agent correctly pivoted to the new instructions. The next step is to deliver on the latest request.</analysis>
